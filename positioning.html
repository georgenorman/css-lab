<!DOCTYPE html>
<!--
  ~ Copyright (c) 2014 George Norman.
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~     http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  ~
  -->
<html>
<head>
  <title>Positioning</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <style>
    @import "css/all-css.css";
  </style>
</head>
<body onload="cssLabModule.handleOnLoad();">
<header>
  <h1>Positioning</h1>
</header>

<main>
  <tzAboutPage style="margin-top:12px;"/>

  <tzTableOfContents class="toc" level1ItemsTagName="h2" level2ItemsTagName="h3"></tzTableOfContents>

  <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
  <h2 id="commonCss">Shared CSS</h2>
  <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->

  <p>
    CSS shared by all examples on this page.
  </p>

<script type="multiline-template" id="tmplCommonCss">
/* A 300px square, expected to serve as a fixed background. */
.outermost {
  background-color: #ccc;
  width: 300px;
  height: 300px;
  padding: 0;
  margin: 0;
}

/* A 240px square grid, to illustrate the position of child divs. */
.grid.middle-grid {
  width: 240px;
  height: 240px;
}

/* A relative positioned 140px square, with a 20px border and a 100px content region. */
.relative-square {
  position:relative;
  width: 100px;
  height: 100px;
  border: 20px solid rgba(255, 0, 0, 0.5);
}
</script>

  <tzCssBlock templateId="tmplCommonCss"></tzCssBlock>

  <tzCodeExample templateId="tmplCommonCss" lang="css"></tzCodeExample>

  <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
  <h2 id="positionRelative">Relative To Static</h2>
  <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->

  <p>
    This series of examples demonstrates some of the wacky things that happen when you nest a relative div inside a static div.
    <span style="color:#CF0000;">Not sure why this would ever be used, but good to know in case it's ever done by accident.</span>
  </p>

  <p>
    In each of the following examples, there are three divs: <i>outermost</i>, which contains <i>middleGrid</i>, which in turn contains <i>innermost</i>.
  </p>

  <!-- `````````````````````````````````` -->
  <h3 id="positionRelative.rdhnm">Relative &lt;div&gt; Sans Margin</h3>
  <!-- `````````````````````````````````` -->

  <p>
    In this example, the <i>innermost</i> div has no margin and everything seems normal.
    The result is exactly as expected -
    the <i>innermost</i> div is relatively positioned inside of <i>middleGrid</i>, at 40px from the top and 40px from the left.
  </p>

<script type="multiline-template" id="tmplExampleRelInStaticNoMarginHtml">
<div class="outermost" id="outermost">
  <div class="grid middle-grid" id="middleGrid">
    <div style="top:40px; left:40px;" class="relative-square" id="innermost">
    </div>
  </div>
</div>
</script>

  <tzCssHtmlExample htmlTemplateId="tmplExampleRelInStaticNoMarginHtml"></tzCssHtmlExample>

  <b>Current 'position' styles:</b>
  <tzDisplayStyles items='{"idStylePairs":[{"outermost": "position"}, {"middleGrid": "position"}, {"innermost": "position"}]}' useShortItems="true"></tzDisplayStyles>


  <!-- `````````````````````````````````` -->
  <h3 id="positionRelative.verticalMarginTransfer">Top Margin Transfer</h3>
  <!-- `````````````````````````````````` -->

  <p>
    For this example, let's keep everything the same as the previous example, except add a 20px margin around the <i>innermost</i> div.
    As expected, this pushes it 20px to the right, relative to the <i>middleGrid</i> (increasing the distance to 60px).
  </p>

  <p>
    <span style="color:red;">Remarkably, the top margin has no effect on the <i>innermost</i> div's distance from the top of <i>middleGrid</i>.
    Instead, the top margin bypasses both the <i>innermost</i> div and the <i>middleGrid</i> and is directly transferred to the top of the <i>outermost</i> div, pushing it down by 20px
    (as evidenced by the more than 20px gap above the <i>outermost</i> div).</span>
  </p>

  <p>
    The effect of Top Margin Transfer can be easily circumvented by setting the parent's position to absolute, as described in the <a href="#positionRelativeInAbsolute">Relative To Absolute</a> section.
  </p>

<script type="multiline-template" id="tmplExampleRelInStatic10pxMarginHtml">
<div class="outermost" id="outermostVmt">
  <div class="grid middle-grid" id="middleGridVmt">
    <div style="top:40px; left:40px; margin:20px;" class="relative-square" id="innermostVmt">
    </div>
  </div>
</div>
</script>

  <tzCssHtmlExample htmlTemplateId="tmplExampleRelInStatic10pxMarginHtml"></tzCssHtmlExample>

  <b>Current 'position' styles:</b>
  <tzDisplayStyles items='{"idStylePairs":[{"outermostVmt": "position"}, {"middleGridVmt": "position"}, {"innermostVmt": "position"}]}' useShortItems="true"></tzDisplayStyles>


  <!-- `````````````````````````````````` -->
  <h3 id="positionRelative.marginTransferObstacles">Margin Transfer Workarounds</h3>
  <!-- `````````````````````````````````` -->

  <p>
    In addition to setting the parent's position to absolute, Top Margin Transfer can also be circumvented by adding a border or padding to <i>outermost</i> (or <i>middleGrid</i>).
  </p>

  <p>
    The example below shows that by adding a border to <i>outermost</i>, the margin transfer from <i>innermost</i> is blocked.
    Instead, the top margin is now transferred to <i>middleGrid</i>.
    Alternatively, adding a border to <i>middleGrid</i> blocks the margin transfer to both the <i>middleGrid</i> and <i>outermost</i> divs all at once
    (i.e., adding a border or padding to an outer div blocks the propagation of the margin transfer feature).
  </p>

<script type="multiline-template" id="tmplExampleRelInStatic10pxMarginOutermostHasBorderHtml">
<div class="outermost" style="border-top:thin solid red;" id="outermostMto">
  <div class="grid middle-grid" id="middleGridMto">
    <div style="top:40px; left:40px; margin:20px;" class="relative-square" id="innermostMto">
    </div>
  </div>
</div>
</script>

  <tzCssHtmlExample htmlTemplateId="tmplExampleRelInStatic10pxMarginOutermostHasBorderHtml"></tzCssHtmlExample>

  <b>Current 'position' styles:</b>
  <tzDisplayStyles items='{"idStylePairs":[{"outermostMto": "position"}, {"middleGridMto": "position"}, {"innermostMto": "position"}]}' useShortItems="true"></tzDisplayStyles>


  <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
  <h2 id="positionRelativeInAbsolute">Relative To Absolute</h2>
  <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->

  <!-- `````````````````````````````````` -->
  <h3 id="positionRelativeInAbsolute.rdh40pxm">Relative &lt;div&gt; has 40px margin</h3>
  <!-- `````````````````````````````````` -->

  <p>
    <span style="color:green;">Nesting a relative div inside of an absolute one, negates the Top Margin Transfer "feature", described in the previous sections.</span>
    For example, setting the margin of the <i>relative-square</i> div to 20px, causes its position, relative to its immediate parent, to be 60px for both the top and the left edges.
  </p>

<script type="multiline-template" id="tmplExampleRelInAbsolute40pxMarginHtml">
<div class="outermost" id="outermostEx2">
  <div class="grid middle-grid" style="position:absolute;" id="middleGridEx2">
    <div style="top:40px; left:40px; margin:20px;" class="relative-square" id="innermostEx2">
    </div>
  </div>
</div>
</script>

  <tzCssHtmlExample htmlTemplateId="tmplExampleRelInAbsolute40pxMarginHtml"></tzCssHtmlExample>

  <b>Current 'position' styles:</b>
  <tzDisplayStyles items='{"idStylePairs":[{"outermostEx2": "position"}, {"middleGridEx2": "position"}, {"innermostEx2": "position"}]}' useShortItems="true"></tzDisplayStyles>

  <b>Current 'margin' styles:</b>
  <tzDisplayStyles items='{"idStylePairs":[{"outermostEx2": "margin"}, {"middleGridEx2": "margin"}, {"innermostEx2": "margin"}]}' useShortItems="true"></tzDisplayStyles>

  <b>Current 'padding' styles:</b>
  <tzDisplayStyles items='{"idStylePairs":[{"outermostEx2": "padding"}, {"middleGridEx2": "padding"}, {"innermostEx2": "padding"}]}' useShortItems="true"></tzDisplayStyles>

  <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
  <h2 id="fixedInStatic">Fixed Position</h2>
  <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->

  <!-- `````````````````````````````````` -->
  <h3 id="fixedInStatic.fdnisd">Fixed &lt;div&gt; with Static &lt;button&gt;</h3>
  <!-- `````````````````````````````````` -->

  <p>
    This example shows a fixed div with statically positioned inner elements.
    The outer container doesn't matter much, because the fixed inner div is hoisted out of it's parent container and displayed at the fixed position specified by its top/right/bottom/left properties.
  </p>

<script type="multiline-template" id="tmplExampleFixedInStaticCss">
.fixed-example-1 {
  position: fixed;
  top: 20%;
  left: 10%;
  width: 250px;
  height: 180px;
  background: #333;
  border: 8px solid #999;
  display: none;
}
</script>

<script type="multiline-template" id="tmplExampleFixedInStaticHtml">
<div>
  <button onclick="tzDomHelperModule.show('fixedInnerEx1'); return false;">Show Fixed with Static Button</a>
</div>

<div id="staticOuterWithFixedInnerEx1">
  <div class="fixed-example-1" id="fixedInnerEx1">
    <button onclick="tzDomHelperModule.hide('fixedInnerEx1'); return false;"
            style="float:right; margin:6px; height:21px;" id="staticBtnEx1">Close</button>
    <p style="margin-top:30px; padding:12px; text-align:center; color:#999">
      This div position is fixed, relative to the browser window.
      Scrolling the window does not affect its position.
    </p>
  </div>
</div>
</script>

  <tzCssHtmlExample cssTemplateId="tmplExampleFixedInStaticCss" htmlTemplateId="tmplExampleFixedInStaticHtml"></tzCssHtmlExample>

  <b>Current 'position' styles:</b>
  <tzDisplayStyles items='{"idStylePairs":[{"staticOuterWithFixedInnerEx1": "position"}, {"fixedInnerEx1": "position"}, {"staticBtnEx1": "position"}]}' useShortItems="true"></tzDisplayStyles>

  <!-- `````````````````````````````````` -->
  <h3 id="fixedInStatic.rbifdisd">Fixed &lt;div&gt; with Relative &lt;button&gt;</h3>
  <!-- `````````````````````````````````` -->

  <p>
    Same as above, but now the button has been changed from static to relative and is positioned to the bottom-right corner.
  </p>

<script type="multiline-template" id="tmplExampleRelativeInFixedInStaticHtml">
<div>
  <button onclick="tzDomHelperModule.show('fixedInnerEx2'); return false;">Show Fixed with Relative Button</a>
</div>

<div id="staticOuterWithFixedInnerEx2">
  <div class="fixed-example-1" id="fixedInnerEx2">
    <button onclick="tzDomHelperModule.hide('fixedInnerEx2'); return false;"
            style="position:relative; top:150px; left:195px; height:21px;" id="relativeBtnEx2">Close</button>
    <p style="margin-top:30px; padding:12px; text-align:center; color:#999"">
      This div position is fixed, relative to the browser window.
      Scrolling the window does not affect its position.
    </p>
  </div>
</div>
</script>

  <tzCssHtmlExample htmlTemplateId="tmplExampleRelativeInFixedInStaticHtml"></tzCssHtmlExample>

  <b>Current 'position' styles:</b>
  <tzDisplayStyles items='{"idStylePairs":[{"staticOuterWithFixedInnerEx2": "position"}, {"fixedInnerEx2": "position"}, {"relativeBtnEx2": "position"}]}' useShortItems="true"></tzDisplayStyles>

</main>

<footer></footer>

<script type="text/javascript" src="js/all-javascript.js"></script> <!-- http://stackoverflow.com/questions/5220313/where-should-js-scripts-go-in-an-html-file -->
</body>

</html>
